<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Global Life Expectancy & Healthcare — Storytelling Visualisation</title>

    <!-- Vega / Vega-Lite / Embed -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <!-- Typeface -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --page-bg: linear-gradient(135deg, #f5f7fa 0%, #eef3f8 100%);
            --card-bg: #ffffff;
            --muted: #6c7a89;
            --accent: #2b8cbe;
            --accent2: #ffa94d;
            --maxWidth: 1100px;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            background: var(--page-bg);
            font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
            color: #243746
        }

        .wrap {
            max-width: var(--maxWidth);
            margin: 28px auto;
            padding: 28px;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 18px 40px rgba(10, 25, 47, 0.08)
        }

        header {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding-bottom: 18px;
            border-bottom: 1px solid #eef2f5
        }

        h1 {
            font-size: 28px;
            margin: 6px 0 4px 0;
            color: #12324b
        }

        p.lead {
            color: var(--muted);
            max-width: 500px;
            line-height: 1.6;
            margin: 0 auto
        }

        .meta {
            margin-top: 12px;
            color: var(--muted);
            font-size: 0.9rem
        }

        .section {
            display: block;
            padding: 28px 0;
            border-bottom: 1px solid #f1f4f6
        }

        .viz-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 18px;
            align-items: start
        }

        @media(min-width:980px) {
            .viz-row {
                grid-template-columns: 0.9fr 0.9fr;
                justify-content: center; 
                /* gap: 80px; */
            }
        }

        .viz-card {
            background: #fcfeff;
            border-radius: 10px;
            padding: 14px;
            box-shadow: 0 6px 18px rgba(10, 25, 47, 0.04)
        }

        /* FIX: Make visualization containers full width */
        .viz-card-full {
            background: #fcfeff;
            border-radius: 10px;
            padding: 14px;
            box-shadow: 0 6px 18px rgba(10, 25, 47, 0.04);
            width: 100%;
            box-sizing: border-box;
        }

        .viz-title {
            font-weight: 600;
            color: #173547;
            margin: 0 0 8px 0
        }

        .caption {
            color: var(--muted);
            font-size: 0.95rem;
            margin: 10px 0;
            max-width: 150x;
        }

        .note {
            background: #fff4e6;
            padding: 12px;
            border-left: 4px solid var(--accent2);
            border-radius: 6px;
            color: #5a3d18
        }

        footer {
            padding-top: 18px;
            text-align: center;
            color: var(--muted);
            font-size: 0.9rem
        }

        /* footer p {
        width: 90%;
        max-width: 550px;
        margin: 0 auto;
        line-height: 1.6;
        font-size: 0.9rem;
        } */

        .two-col {
            display: grid;
            grid-template-columns: 1fr;
            gap: 18px
        }

        @media(min-width:980px) {
            .two-col {
                grid-template-columns: 2fr 1fr
            }
        }

        .annotation {
            font-size: 0.95rem;
            color: var(--muted);
            line-height: 1.6;
            max-width: 1100px;
        }

        .annotation-spaced {
            font-size: 0.95rem;
            color: var(--muted);
            line-height: 1.6;
            max-width: 1100px;
        }

        .annotation-spaced ul li {
            margin-bottom: 30px; /* space between bullet points */
        }

        .annotation-spaced ul {
            padding-left: 20px; /* keeps normal bullet indent */
        }

        a {
            color: var(--accent)
        }
    </style>
</head>

<body>
    <div class="wrap">
        <header>
            <h1>Life & Health: Global Life Expectancy in Focus (2000-2015)</h1>
            <p class="lead">A visual story exploring how health, vaccines, and economic factors shape life expectancy
                around the world.</p>
        </header>

        <!-- Section 1: Global Snapshot -->
        <section class="section">
            <div class="one-col">
                <div>
                    <h2 class="viz-title">Global Life Expectancy</h2>
                    <div class="viz-card-full" id="choropleth_map" style="min-height:520px"></div>
                </div>

                <div class="viz-card annotation">
                    <h3 style="margin-top:50">At a glance</h3>
                    <div class="viz-row">
                        
                        <ul>
                            <p class="caption">Life expectancy correlates with multiple factors including GDP, vaccination coverage, and
                            health indicators such as infant mortality and HIV incidence.</p>
                        </ul>
                
                        <ul>
                            <p class="caption">Use this map to spot regions
                            with high and low life expectancy.</p>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Wealth-Health Trend -->
        <section class="section">
            <h2 class="viz-title">Wealth-Health Links</h2>
            <div class="one-col">
                <div class="viz-card-full" id="gdp_life_scatter" style="min-height:420px"></div>
            </div>
            
            <div class="viz-card annotation">
                <div class="viz-row">
                    <ul>
                        <p class="caption">A higher GDP per capita means a nation and its citizens have more resources to invest in the determinants of health:
                        better nutrition, safe sanitation, advanced medical care, and disease prevention, all of which directly increase life
                        expectancy.</p>
                    </ul>
            
                    <ul>
                        <p class="caption">A healthier population is a more productive population. Fewer work days are lost to illness, children learn better and
                        become a more skilled workforce, and people have longer, more productive working lives, all of which drive economic
                        growth and increase GDP per capita.</p>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section 3: Health factor relationships -->
        <section class="section">
            <h2 class="viz-title">Which health factors matter most?</h2>
            <div class>
                <div class="viz-card-full" id="health_matrix" style="min-height:200px"></div>
                <div class="viz-card-full" id="testing" style="min-height:420px"></div>
            </div>
        </section>

        <!-- Section 4: Vaccines & Economics -->
        <section class="section">
            <h2 class="viz-title">Vaccination coverage and economic status</h2>
            <div class="viz-row">
                <div class="viz-card" id="vaccine_bar" style="min-height:420px"></div>
                <div class="viz-card annotation-spaced">
                    <ul>
                        <li><strong>Broad patterns:</strong> Higher GDP, better vaccine coverage, and lower infant
                            mortality are associated with higher life expectancy.</li>
                        <li><strong>Regional differences:</strong> Some regions show major improvements (2000→2015),
                            while others lag due to health crises or limited access to care.</li>
                    </ul>
                </div>
            </div>

            <div class="viz-row">
                <div class="viz-card" id="econ_box" style="min-height:420px"></div>
                <div class="viz-card annotation-spaced">
                    <ul>
                        <li><strong>Broad patterns:</strong> Higher GDP, better vaccine coverage, and lower infant
                            mortality are associated with higher life expectancy.</li>
                        <li><strong>Regional differences:</strong> Some regions show major improvements (2000→2015),
                            while others lag due to health crises or limited access to care.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section 5: Population and global trend -->
        <section class="section">
            <h2 class="viz-title">Fertility vs Life Expectancy: The Development Divide</h2>
            <div class="one-col">
                <div class="viz-card-full" id="fertility_life_scatter" style="min-height:520px"></div>
                <!-- <div class="viz-card" id="global_trend" style="min-height:360px"></div> -->
            </div>
            
            <div class="viz-card annotation">
                <div class="viz-row">
                    <ul>
                        <p class="caption">Improvements in health and living conditions (leading to higher life expectancy) create the social and economic
                        rationale for having fewer children.</p>
                    </ul>

                    <ul>
                        <p class="caption">The subsequent decline in fertility then frees up resources that further improve health, education, and economic
                            well-being, which in turn reinforces both the trend for smaller families and the capacity for longer lives.</p>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section 6: Migration Effects -->
        <section class="section">
            <h2 class="viz-title">Effects of migration and population</h2>
            <div class="viz-row">
                <div class="viz-card-full" id="migration_arc" style="min-height:200px"></div>

                <div class="viz-card annotation-spaced">
                    <ul>
                        <li><strong>Broad patterns:</strong> Higher GDP, better vaccine coverage, and lower infant
                            mortality are associated with higher life expectancy.</li>
                        <li><strong>Regional differences:</strong> Some regions show major improvements (2000→2015),
                            while others lag due to health crises or limited access to care.</li>
                    </ul>
                </div>
            </div>

            <div class="viz-row">
                <div class="viz-card-full" id="pop_treemap" style="min-height:200px"></div>
            
                <div class="viz-card annotation-spaced">
                    <ul>
                        <li><strong>Broad patterns:</strong> Higher GDP, better vaccine coverage, and lower infant
                            mortality are associated with higher life expectancy.</li>
                        <li><strong>Regional differences:</strong> Some regions show major improvements (2000→2015),
                            while others lag due to health crises or limited access to care.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section 7: Key takeaways-->
        <section class="section">
            <h2 class="viz-title">Summary key takeaways</h2>
            <div style="display:grid;gap:12px">
                <div class="viz-card annotation-spaced">
                    <div class="viz-row">
                        <ul>
                            <li><strong>Broad patterns:</strong> Higher GDP, better vaccine coverage, and lower infant
                                mortality are associated with higher life expectancy.</li>

                            <li><strong>Regional differences:</strong> Some regions show major improvements (2000→2015),
                                while others lag due to health crises or limited access to care.</li>
                        </ul>
                            
                        <ul>
                            <li><strong>Population impact:</strong> A few large countries strongly influence the global
                                averages.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Section 8: Footer for Source, Date, Author-->
        <footer>
            <p><strong>Source 1:</strong> Life Expectancy WHO (<a href="https://www.kaggle.com/datasets/lashagoch/life-expectancy-who-updated" target="_blank">Kaggle
                - Life Expectancy by WHO</a>)</p>

            <p>
                <strong>Source 2:</strong> United Nations World Population Prospects
                (<a href="https://population.un.org/wpp/downloads?folder=Standard%20Projections&group=CSV%20format"
                    target="_blank">United Nations - World Population Prospects</a>)
            </p>

            <p>
                
            </p>
                <strong>Date:</strong> 15th October 2025
            <p>
                <strong>Author:</strong> © Low Jhin Yen
            </p>
        </footer>
    </div>

    <!-- load the script that embeds the specs -->
    <script src="vega_lite_vis.js"></script>
</body>

</html>